股票问题：









### **dp下标含义：**

**只能作一次买卖**

dp【i】【0】前i天买股票能获得的最大利润

dp【i】【1】前i天买股票能获得的最大利润



**能做无限次买卖**

dp【i】【0】前i天买股票能获得的最大利润

dp【i】【1】前i天买股票能获得的最大利润



**只能做两次买卖**

一天一共就有五个状态， 0. 没有操作

1. 第一次买入
2. 第一次卖出
3. 第二次买入
4. 第二次卖出

dp【i】【j】中 i表示第i天，j为 [0 - 4] 上述五个状态，dp[i][j]表示第i天状态j所剩最大现金。





**只能做k次买卖**

使用二维数组 dp[i][j] ：第i天的状态为j，所剩下的最大现金是dp[i][j]

j的状态表示为：

- 0 表示不操作
- 1 第一次买入
- 2 第一次卖出
- 3 第二次买入
- 4 第二次卖出
- .....

除了0以外，偶数就是卖出，奇数就是买入。

即dp【i】【j】表示前i天第j+1/ 2次交易后的状态，j为奇数为卖股票，j为偶数为买股票







### 递推方程：

第i天可以选择买股票或不买股票，卖股票和不卖股票

记住：只有卖股票后的到的是本次买卖最终获得利润

若第i天买股票：在上次最终获得利润减去当天股票价钱并与第i天前库存比较取最大值

若第i天卖股票：在本次买股票后的库存加当天股票价钱并与第i天前利润比较取最大值



```cpp
 **只能作一次买卖**
dp[i][0] = max(dp[i - 1][0], -prices[i]);
dp[i][1] = max(dp[i - 1][1], prices[i] + dp[i - 1][0]);
   
**能做无限次买卖**
dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] - prices[i]); 
dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] + prices[i]);

**只能做两次买卖**
dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] - prices[i]);
dp[i][2] = max(dp[i - 1][2], dp[i - 1][1] + prices[i]);
dp[i][3] = max(dp[i - 1][3], dp[i - 1][2] - prices[i]);
dp[i][4] = max(dp[i - 1][4], dp[i - 1][3] + prices[i]);

**只能做k次买卖**
dp[i][j + 1] = max(dp[i - 1][j + 1], dp[i - 1][j] - prices[i]);
dp[i][j + 2] = max(dp[i - 1][j + 2], dp[i - 1][j + 1] + prices[i]);
```



### 初始化：

第0天（第n次）买股票后的库存为-price【0】

第0天（第n次）卖股票后的利润为0

